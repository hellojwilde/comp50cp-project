<!DOCTYPE html>
<html lang="en">
<head>
  <title>Vote</title>
</head>
<body>
  <h1>Vote</h1>

  <form method="post" action="/vote_post.yaws">
    <p>
      <label for="booth">Booth (PID):</label>
      <erl>
        input_booth(BoothPid) -> 
          {ehtml, 
            {input, [{type, "text"}, {name, "booth"}, {value, BoothPid}]}}.

        out(A) ->
          Query = yaws_api:parse_query(A),
          case lists:keyfind("booth", 1, Query) of
            {"booth", BoothPid} -> input_booth(BoothPid);
            _ -> input_booth("")
          end.
      </erl>
    </p>

    <p>
      <label for="credential">Credential:</label>

      <erl>
        input_credential(Cred) -> 
          {ehtml, 
            {input, [{type, "text"}, {name, "credential"}, {value, Cred}]}}.

        out(A) ->
          Query = yaws_api:parse_query(A),
          case lists:keyfind("credential", 1, Query) of
            {"credential", Cred} -> input_credential(Cred);
            _ -> input_credential("")
          end.
      </erl>
    </p>

    <table>
      <tr>
        <td>Candidate</td>
        <td>Approve</td>
        <td>Rank</td>
      </tr>
      <tr>
        <td>Anschel</td>
        <td><input type="checkbox" name="approvals" value="anschel"/></td>
        <td><input type="number" name="rank_anschel"/></td>
      </tr>
      <tr>
        <td>Josh</td>
        <td><input type="checkbox" name="approvals" value="josh"/></td>
        <td><input type="number" name="rank_josh"/></td>
      </tr>
      <tr>
        <td>Andrew</td>
        <td><input type="checkbox" name="approvals" value="andrew"/></td>
        <td><input type="number" name="rank_andrew"/></td>
      </tr>
      <tr>
        <td>Jonathan</td>
        <td><input type="checkbox" name="approvals" value="jonathan"/></td>
        <td><input type="number" name="rank_jonathan"/></td>
      </tr>
    </table>

    <p>
      <input type="submit" value="Vote!"/>
    </p>
  </form>
</body>
</html>